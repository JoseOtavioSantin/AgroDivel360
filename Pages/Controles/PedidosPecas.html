<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="theme-color" content="#2c2f3f" />
  <title>Controle de Peças</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- LIBS EXTERNAS -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- CSS -->
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/Pages/Dashboard/Principal.css">
  <link rel="stylesheet" href="/assets/css/Pages/Controles/Pedidospecas.css">

</head>
<body>

  <nav id="sidebar-placeholder"></nav>

  <section class="home">
    <div class="text">
      <h1>Controle de Pedidos de Peças</h1>
      <p id="dynamic-title">Carregando...</p>
    </div>

    <!-- CARDS ATUALIZADOS PARA O NOVO FLUXO -->

    <div class="dashboard-cards">
      <!-- Card "Total de Pedidos" - Filtra para mostrar TODOS -->
      <div class="dashboard-card blue-card card-filter" data-status="TODOS">
        <h2 id="total-pedidos">0</h2>
        <p><i data-lucide="package"></i> Total de Pedidos</p>
      </div>

      <!-- Card "Pedir Peça" -->
      <div class="dashboard-card red-card card-filter" data-status="PEDIR PEÇA">
        <h2 id="pedidos-pedir">0</h2>
        <p><i data-lucide="shopping-cart"></i> Pedir Peça</p>
      </div>

      <!-- Card "Peça Pedida" -->
      <div class="dashboard-card orange-card card-filter" data-status="PEÇA PEDIDA">
        <h2 id="pedidos-pedida">0</h2>
        <p><i data-lucide="loader-circle"></i> Peça Pedida</p>
      </div>

      <!-- Card "Chegou" -->
      <div class="dashboard-card card-filter" style="background-color: #03a9f4;" data-status="CHEGOU">
        <h2 id="pedidos-chegou">0</h2>
        <p><i data-lucide="package-check"></i> Chegou</p>
      </div>

      <!-- Card "Separado" -->
      <div class="dashboard-card card-filter" style="background-color: #673ab7;" data-status="SEPARADO">
        <h2 id="pedidos-separado">0</h2>
        <p><i data-lucide="box-select"></i> Separado</p>
      </div>

      <!-- Card "Entregue" -->
      <div class="dashboard-card card-filter" style="background-color: #4caf50;" data-status="ENTREGUE">
        <h2 id="pedidos-entregue">0</h2>
        <p><i data-lucide="check-circle"></i> Entregue</p>
      </div>
    </div>

    <div class="content-card">
      <div class="content-card-header">
        <h3>Acompanhamento de Pedidos</h3>
        <div class="header-actions">
          <button class="btn-acao" id="btn-verificar-xml" title="Verificar Estoque com XML">
            <i data-lucide="file-scan"></i> 
          </button>
          <input type="file" id="xml-uploader" accept=".xml" style="display: none;">
          
          <a href="/Pages/Formularios/form-pecaspedidos.html" class="btn-acao" title="Adicionar Novo Pedido">
            <i data-lucide="plus"></i> 
          </a>
        </div>
      </div>
      <div class="content-card-body">
        <div class="filters">
          <input id="filtro-codigo" type="text" placeholder="Buscar por Código..." />
          <input id="filtro-pedido-para" type="text" placeholder="Buscar por 'Pedido para'..." />
          <input id="filtro-fornecedor" type="text" placeholder="Buscar por Fornecedor..." />
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Código</th><th>Qtd.</th><th>Pedido para</th><th>Status</th><th>OS</th><th>Fornecedor</th><th>Data</th><th>Responsável</th><th>Ações</th>
              </tr>
            </thead>
            <tbody id="tabela-pedidos"></tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <div id="loader-overlay" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">Carregando...</div>

  <!-- Carrega o JavaScript da página a partir de um arquivo externo -->
  <script type="module" src="/assets/js/Controles/ControlePedidos.js"></script>

  <!-- Scripts Globais -->
  <script type="module" src="/assets/js/auth.js"></script>
  <script src="/assets/js/main.js"></script> 
  <script src="/assets/js/components/Sidebar.js"></script>

</body>
</html>
